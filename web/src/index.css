@import './globals.css';
@import "tailwindcss";
@tailwind base;
@tailwind components;
@tailwind utilities;

/* React Flow Controls - Dark Rounded Panel */
.rf-controls--dark.react-flow__panel.react-flow__controls {
  background: color-mix(in oklch, var(--background) 85%, transparent);
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 20px color-mix(in oklch, var(--foreground) 12%, transparent);
  overflow: hidden;
}

.rf-controls--dark .react-flow__controls-button {
  background: color-mix(in oklch, var(--card) 85%, transparent);
  border: 1px solid var(--border);
  color: var(--foreground);
  border-radius: 8px;
  width: 28px;
  height: 28px;
}

.rf-controls--dark .react-flow__controls-button:hover {
  background: color-mix(in oklch, var(--card) 92%, transparent);
}

.rf-controls--dark .react-flow__controls-button[aria-pressed="true"] {
  background: color-mix(in oklch, var(--ring) 18%, transparent);
  border-color: color-mix(in oklch, var(--ring) 35%, transparent);
  color: var(--ring);
}

/* Custom ControlButtons to match panel */
.rf-controls--dark .rf-controls__btn {
  background: color-mix(in oklch, var(--card) 85%, transparent);
  border: 1px solid var(--border);
  color: var(--foreground);
  border-radius: 8px;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.rf-controls--dark .rf-controls__btn:hover {
  background: color-mix(in oklch, var(--card) 92%, transparent);
}

.rf-controls--dark .rf-controls__btn--primary {
  border-color: color-mix(in oklch, var(--ring) 35%, transparent);
}

.rf-controls--dark .rf-controls__btn--danger {
  border-color: color-mix(in oklch, var(--destructive) 35%, transparent);
}

/* Legend dark panel alignment */
.react-flow__panel.legend--dark {
  background: color-mix(in oklch, var(--background) 85%, transparent);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 4px 20px color-mix(in oklch, var(--foreground) 12%, transparent);
  padding: 8px 12px;
}

.legend--dark .dot {
  width: 8px;
  height: 8px;
  border-radius: 9999px;
  border: 1px solid currentColor;
}
/* Modern CSS Reset compatible with Tailwind/shadcn */
html {
  line-height: 1.15;
  -webkit-text-size-adjust: 100%;
}

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

*, *::before, *::after {
  box-sizing: border-box;
}

/* Only reset margin/padding for layout elements, not form controls */
h1, h2, h3, h4, h5, h6, p, blockquote, pre, dl, dd, ol, ul, figure, hr, fieldset, legend {
  margin: 0;
  padding: 0;
}

/* Preserve button and input default styling */
button, input, optgroup, select, textarea {
  font-family: inherit;
  font-size: 100%;
  line-height: 1.15;
  margin: 0;
}

/* Custom Scrollbar for the entire theme */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: color-mix(in oklch, var(--card) 92%, transparent);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: color-mix(in oklch, var(--ring) 60%, transparent);
  border-radius: 4px;
  border: 1px solid color-mix(in oklch, var(--ring) 30%, transparent);
}

::-webkit-scrollbar-thumb:hover {
  background: color-mix(in oklch, var(--ring) 80%, transparent);
  border-color: color-mix(in oklch, var(--ring) 50%, transparent);
}

::-webkit-scrollbar-corner {
  background: color-mix(in oklch, var(--card) 92%, transparent);
}

/* Firefox scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: color-mix(in oklch, var(--ring) 60%, transparent) color-mix(in oklch, var(--card) 92%, transparent);
}

:root {
  --neon-base: var(--chart-2);
  --neon-glow: var(--chart-2);
  --neon-err: var(--destructive);
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: radial-gradient(1200px 700px at 30% -10%, var(--light-rays-color), transparent), 
              radial-gradient(900px 600px at 90% 10%, color-mix(in oklch, var(--ring) 25%, transparent), transparent), 
              var(--background);
  color: var(--foreground);
  height: 100vh;
  overflow: hidden;
}

#root {
  height: 100vh;
  display: flex;
  flex-direction: column;
}

.app {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

/* Top Bar */
.top-bar {
  height: 48px;
  background-color: color-mix(in oklch, var(--background) 50%, transparent);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
  gap: 16px;
}

.top-bar-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.top-bar-logo {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-right: 24px;
}

.logo-image {
  width: 24px;
  height: 24px;
  filter: drop-shadow(0 0 8px color-mix(in oklch, var(--ring) 50%, transparent));
}

.logo-text {
  font-size: 16px;
  font-weight: 600;
  color: var(--sidebar-foreground);
  text-shadow: 0 0 8px color-mix(in oklch, var(--ring) 30%, transparent);
}

.top-bar-section {
  display: flex;
  align-items: center;
  gap: 8px;
}

.top-bar-label {
  font-size: 12px;
  color: var(--muted-foreground);
  font-weight: 500;
}

.top-bar-select {
  background-color: color-mix(in oklch, var(--card) 85%, transparent);
  border: 1px solid var(--border);
  color: var(--foreground);
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 12px;
  min-width: 120px;
  transition: all 0.2s ease;
}

.top-bar-select:focus {
  outline: none;
  border-color: var(--ring);
  box-shadow: 0 0 0 3px color-mix(in oklch, var(--ring) 30%, transparent);
}

.top-bar-select:hover {
  background-color: color-mix(in oklch, var(--card) 92%, transparent);
}

/* Main Layout */
.main-layout {
  display: flex;
  flex: 1;
  overflow: hidden;
}

/* Navigation Sidebar */
.nav-sidebar {
  width: 240px;
  display: flex;
  flex-direction: column;
  padding: 16px 0 16px 16px;
}

.nav-sidebar.collapsed {
  width: 64px;
  padding-left: 8px;
}

.nav-menu {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.nav-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  cursor: pointer;
  font-size: 13px;
  color: var(--muted-foreground);
  user-select: none;
  border-radius: 16px;
}

.nav-item:hover:not(.active) {
  background-color: color-mix(in oklch, var(--card) 92%, transparent);
}

.nav-item.active {
  background-color: color-mix(in oklch, var(--background) 50%, transparent);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  color: var(--primary-foreground);
}

.nav-item .icon {
  color: var(--muted-foreground);
  margin-right: 12px;
  width: 24px;
  height: 24px;
}

.nav-item.active .icon {
  color: var(--foreground);
}

.nav-sidebar.collapsed .nav-item {
  justify-content: center;
}

.nav-sidebar.collapsed .nav-item .icon {
  margin-right: 0;
}

.nav-footer {
  margin-top: auto;
  padding: 8px 16px 0 0;
  display: flex;
  justify-content: flex-start;
}

.nav-sidebar.collapsed .nav-footer {
  padding-right: 8px;
}

.collapse-toggle {
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent; /* ghost */
  border: none; /* ghost */
  color: var(--muted-foreground);
  border-radius: 8px;
  cursor: pointer;
  padding: 0 6px;
}

.collapse-toggle:hover {
  background: color-mix(in oklch, var(--card) 93%, transparent); /* subtle ghost hover */
}

.nav-item .label {
  flex: 1;
  font-weight: 600;
  font-size: 14px;
}

.nav-item.active .label {
  color: var(--foreground);
}

.nav-item .description {
  font-size: 11px;
  color: var(--muted-foreground);
  margin-top: 2px;
}

/* Content Area */
.content-area {
  flex: 1;
  display: grid;
  grid-template-columns: 1fr auto auto; /* main | resizer | chat */
  overflow: hidden;
  min-height: 0;
}

/* File Tree Panel */
.file-tree-panel {
  width: 280px;
  background-color: color-mix(in oklch, var(--card) 2%, transparent);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border);
  border-radius: 16px;
  margin: 16px 0 16px 16px;
  display: flex;
  flex-direction: column;
  box-shadow: 0 0 0 1px color-mix(in oklch, var(--ring) 16%, transparent), 0 0 40px color-mix(in oklch, var(--ring) 15%, transparent);
}

.file-tree-header {
  height: 32px;
  background-color: transparent;
  border-bottom: 1px solid var(--border);
  border-radius: 16px 16px 0 0;
  display: flex;
  align-items: center;
  padding: 0 16px;
  font-size: 12px;
  color: var(--muted-foreground);
  font-weight: 500;
  letter-spacing: 0.5px;
}

.file-tree {
  flex: 1;
  overflow-y: auto;
  padding: 8px 0;
}

.file-tree-item {
  display: flex;
  align-items: center;
  padding: 4px 16px;
  cursor: pointer;
  font-size: 13px;
  color: var(--muted-foreground);
  user-select: none;
}

.file-tree-item:hover {
  background-color: color-mix(in oklch, var(--card) 88%, transparent);
}

.file-tree-item.selected {
  background-color: color-mix(in oklch, var(--ring) 20%, transparent);
}

.file-tree-item.directory {
  font-weight: 500;
}

.file-tree-item .icon {
  margin-right: 6px;
  width: 16px;
  height: 16px;
}

.file-tree-item .name {
  flex: 1;
}

.file-tree-item.nested {
  padding-left: 32px;
}

.file-tree-item.nested-2 {
  padding-left: 48px;
}

/* Main Content Area */
.main-content {
  display: flex;
  flex-direction: column;
  background-color: color-mix(in oklch, var(--card) 50%, transparent);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border);
  border-radius: 16px;
  margin: 16px;
  box-shadow: 0 0 0 1px color-mix(in oklch, var(--ring) 16%, transparent), 0 0 40px color-mix(in oklch, var(--ring) 15%, transparent);
  overflow: hidden;
  min-height: 0;
}

/* Tab Bar */
.tab-bar {
  height: 36px;
  background-color: transparent;
  border-bottom: 1px solid var(--border);
  border-radius: 16px 16px 0 0;
  display: flex;
  align-items: center;
}

.tabs {
  display: flex;
  flex: 1;
}

.tab {
  padding: 8px 16px;
  font-size: 16px;
  color: var(--muted-foreground);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  user-select: none;
  display: flex;
  align-items: center;
  gap: 6px;
}

.tab:hover {
  color: var(--foreground);
}

.tab.active {
  color: var(--foreground);
  border-bottom-color: var(--neon-glow);
}

.tab-controls {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0 12px;
}

/* Editor Area */
.editor-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden;
}

.editor-header {
  height: 32px;
  background-color: transparent;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  padding: 0 16px;
  justify-content: space-between;
}

.editor-title {
  font-size: 12px;
  color: var(--muted-foreground);
}

.editor-container {
  flex: 1;
  position: relative;
}

.loading {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--muted-foreground);
}

.error {
  padding: 16px;
  color: var(--destructive);
  background-color: var(--destructive-foreground);
  margin: 16px;
  border-radius: 4px;
  border: 1px solid var(--destructive);
}

.success-message {
  position: fixed;
  top: 16px;
  right: 16px;
  background-color: color-mix(in oklch, var(--secondary) 35%, transparent);
  color: var(--secondary-foreground);
  padding: 12px 16px;
  border-radius: 4px;
  border: 1px solid color-mix(in oklch, var(--secondary) 55%, transparent);
  z-index: 1000;
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Chat Panel */
.chat-panel {
  width: 320px;
  height: calc(100vh - 48px - 32px);
  background-color: color-mix(in oklch, var(--card) 50%, transparent);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border);
  border-radius: 16px;
  margin: 16px 16px 16px 0;
  display: flex;
  flex-direction: column;
  box-shadow: 0 0 0 1px color-mix(in oklch, var(--ring) 16%, transparent), 0 0 40px color-mix(in oklch, var(--ring) 15%, transparent);
  transition: all 0.3s ease;
}

/* simple spin utility for lucide Loader2 */
.spin {
  animation: spin 1s linear infinite;
}
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Chat resizer visibility and style */
.chat-resizer {
  width: 6px;
  cursor: col-resize;
  margin: 16px 4px 16px -11px;
  border-radius: 6px;
  background: color-mix(in oklch, var(--card) 92%, transparent);
  opacity: 0;
  transition: opacity 0.12s ease;
}

.chat-resizer:hover {
  opacity: 1;
}

/* Chat Panel Fullscreen */
.chat-panel.fullscreen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh;
  z-index: 9999;
  border-radius: 0;
  margin: 0;
  border: none;
  box-shadow: 0 0 0 1px color-mix(in oklch, var(--ring) 30%, transparent);
  background-color: color-mix(in oklch, var(--foreground) 50%, transparent);
  backdrop-filter: blur(15px);
}

.chat-header {
  position: sticky;
  top: 0;
  z-index: 2;
  height: 48px;
  /* background-color: rgba(255,255,255,0.02); */
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 12px;
}

.chat-header-left {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
  min-width: 0;
}

.chat-header-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}

.chat-header-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--foreground);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.chat-header-button:hover {
  background: color-mix(in oklch, var(--card) 92%, transparent);
  color: var(--foreground);
  border-color: color-mix(in oklch, var(--ring) 30%, transparent);
}

.thread-title {
  color: var(--muted-foreground);
  font-size: 12px;
  font-weight: normal;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.chat-header .icon {
  width: 16px;
  height: 16px;
  color: var(--neon-glow);
  filter: drop-shadow(0 0 8px color-mix(in oklch, var(--ring) 50%, transparent));
}

.chat-header .title {
  font-size: 12px;
  color: var(--muted-foreground);
  font-weight: 500;
}

.chat-messages {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 12px 12px 72px; /* bottom padding so last message not under input */
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 0;
  max-height: 100%;
}

.tool-cards {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.tool-card {
  background: color-mix(in oklch, var(--card) 92%, transparent);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 8px 10px;
}

.tool-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}

.tool-card-title {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--foreground);
}

.tool-card-body details {
  margin-top: 6px;
}

.tool-card-body summary {
  cursor: pointer;
  font-size: 11px;
  color: var(--muted-foreground);
}

.tool-card-body pre {
  margin: 6px 0 0 0;
  padding: 8px;
  background: color-mix(in oklch, var(--background) 35%, transparent);
  border-radius: 8px;
  overflow-x: auto;
  font-size: 12px;
}

/* Scrollbar customizada para chat */
.chat-messages::-webkit-scrollbar {
  width: 6px;
}

.chat-messages::-webkit-scrollbar-track {
  background: color-mix(in oklch, var(--card) 92%, transparent);
  border-radius: 3px;
}

.chat-messages::-webkit-scrollbar-thumb {
  background: color-mix(in oklch, var(--ring) 30%, transparent);
  border-radius: 3px;
}

.chat-messages::-webkit-scrollbar-thumb:hover {
  background: color-mix(in oklch, var(--ring) 50%, transparent);
}

/* Markdown Styling in Assistant Messages */
.assistant-message h1,
.assistant-message h2,
.assistant-message h3,
.assistant-message h4,
.assistant-message h5,
.assistant-message h6 {
  margin: 0.5em 0 0.3em 0;
  color: var(--foreground);
  font-weight: 600;
}

.assistant-message h1 { font-size: 1.2em; }
.assistant-message h2 { font-size: 1.1em; }
.assistant-message h3 { font-size: 1.05em; }

.assistant-message p {
  margin: 0.5em 0;
  line-height: 1.5;
  color: var(--foreground);
}

.assistant-message ul,
.assistant-message ol {
  margin: 0.5em 0;
  padding-left: 1.2em;
}

.assistant-message li {
  margin: 0.2em 0;
  line-height: 1.4;
  color: var(--foreground);
}

.assistant-message code {
  background: color-mix(in oklch, var(--secondary) 20%, transparent);
  padding: 0.1em 0.3em;
  border-radius: 3px;
  font-family: var(font-mono);
  font-size: 0.9em;
  color: var(--foreground);
}

.assistant-message pre {
  background: color-mix(in oklch, var(--background) 40%, transparent);
  padding: 0.8em;
  border-radius: 6px;
  overflow-x: auto;
  margin: 0.5em 0;
  border-left: 3px solid color-mix(in oklch, var(--ring) 50%, transparent);
}

.assistant-message pre code {
  background: none;
  padding: 0;
  color: var(--foreground);
}

.assistant-message blockquote {
  border-left: 3px solid color-mix(in oklch, var(--ring) 50%, transparent);
  padding-left: 1em;
  margin: 0.5em 0;
  font-style: italic;
  color: var(--muted-foreground);
}

.assistant-message strong {
  font-weight: 600;
  color: var(--foreground);
}

.assistant-message em {
  font-style: italic;
  color: var(--foreground);
}

/* Typing Indicator */
.message-bubble.typing {
  padding: 16px 20px;
}

.typing-dots {
  display: flex;
  align-items: center;
  gap: 4px;
  height: 20px;
}

.typing-dots span {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background-color: color-mix(in oklch, var(--foreground) 60%, transparent);
  animation: typing-bounce 1.4s infinite ease-in-out;
}

.typing-dots span:nth-child(1) {
  animation-delay: -0.32s;
}

.typing-dots span:nth-child(2) {
  animation-delay: -0.16s;
}

.typing-dots span:nth-child(3) {
  animation-delay: 0s;
}

@keyframes typing-bounce {
  0%, 80%, 100% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

.chat-message {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.chat-message.user {
  align-items: flex-end;
}

.chat-message.assistant {
  align-items: flex-start;
}

.message-bubble {
  max-width: 80%;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 14px;
  line-height: 1.6;
}

.message-bubble.user {
  background: linear-gradient(135deg, var(--neon-base), var(--neon-glow));
  color: var(--primary-foreground);
  box-shadow: 0 0 12px rgba(255,56,255,0.3);
}

.message-bubble.assistant {
  background-color: color-mix(in oklch, var(--card) 88%, transparent);
  border: 1px solid var(--border);
  color: var(--foreground);
}

.tool-message {
  align-self: flex-start;
  width: auto;
  max-width: 90%;
  padding: 8px 12px;
  background: color-mix(in oklch, var(--card) 93%, transparent);
  border: 1px solid var(--border);
  border-radius: 8px;
  font-size: 12px;
  color: var(--muted-foreground);
}

.tool-message.error {
  background: color-mix(in oklch, var(--destructive) 8%, transparent);
  border-color: color-mix(in oklch, var(--destructive) 35%, transparent);
}

.tool-message-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  cursor: pointer;
}

.tool-message-title {
  font-weight: 600;
  color: var(--foreground);
}

.tool-message-details {
  margin-top: 8px;
}

.tool-section-title {
  text-transform: lowercase;
  font-size: 11px;
  color: var(--muted-foreground);
  margin-bottom: 4px;
}

.tool-section-title.error {
  color: var(--destructive);
}

.tool-message-details pre {
  margin-top: 4px;
  padding: 8px;
  background: color-mix(in oklch, var(--background) 35%, transparent);
  border-radius: 6px;
  font-size: 11px;
  white-space: pre-wrap;
  word-break: break-all;
}

.tool-error-pre {
  background: color-mix(in oklch, var(--destructive) 12%, transparent) !important;
  border: 1px solid color-mix(in oklch, var(--destructive) 35%, transparent);
  color: var(--destructive-foreground);
}

/* Assistant Message - Full Width */
.assistant-message {
  width: 100%;
  padding: 16px;
  color: rgba(255,255,255,0.9);
  line-height: 1.6;
  font-size: 14px;
}

.assistant-message.typing {
  padding: 16px;
}

.chat-input {
  position: sticky;
  bottom: 0;
  z-index: 3;
  padding: 8px 12px;
  position: sticky;
  bottom: 0;
}

.chat-input-field {
  width: 100%;
  background-color: color-mix(in oklch, var(--card) 92%, transparent);
  border: 1px solid var(--border);
  color: var(--foreground);
  padding: 8px;
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
  font-weight: 400;
  font-style: normal;
  resize: none;
  min-height: 40px; /* altura de 1 linha */
  max-height: 130px; /* altura de 6.5 linhas */
  line-height: 18px;
  overflow-y: auto;
  transition: all 0.2s ease;
}

.chat-input-field:focus {
  outline: none;
  border-color: var(--ring);
  box-shadow: 0 0 0 3px color-mix(in oklch, var(--ring) 30%, transparent);
}

.chat-input-field::placeholder {
  color: var(--muted-foreground);
}

/* Thread Menu Flutuante */
.thread-menu-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: color-mix(in oklch, var(--background) 50%, transparent);
  backdrop-filter: blur(4px);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.thread-menu {
  background: color-mix(in oklch, var(--card) 50%, transparent);
  border: 1px solid color-mix(in oklch, var(--ring) 30%, transparent);
  border-radius: 12px;
  box-shadow: 0 0 0 1px color-mix(in oklch, var(--ring) 16%, transparent), 0 0 40px color-mix(in oklch, var(--ring) 15%, transparent);
  width: 400px;
  max-width: 90vw;
  max-height: 500px;
  overflow: hidden;
  animation: fadeInScale 0.2s ease-out;
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.thread-menu-header {
  padding: 16px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid var(--border);
  background-color: color-mix(in oklch, var(--card) 92%, transparent);
  font-size: 14px;
  font-weight: 600;
  color: var(--foreground);
}

.thread-menu-content {
  max-height: 400px;
  overflow-y: auto;
}

.close-button {
  background: transparent;
  border: none;
  color: var(--muted-foreground);
  cursor: pointer;
  font-size: 18px;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.close-button:hover {
  background: color-mix(in oklch, var(--card) 92%, transparent);
  color: var(--foreground);
}

.thread-item {
  padding: 12px 16px;
  cursor: pointer;
  border-bottom: 1px solid color-mix(in oklch, var(--border) 50%, transparent);
  transition: all 0.2s ease;
}

.thread-item:hover {
  background-color: color-mix(in oklch, var(--card) 92%, transparent);
}

.thread-item.active {
  background-color: color-mix(in oklch, var(--ring) 10%, transparent);
  border-left: 3px solid var(--neon-glow);
}

.thread-item-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--foreground);
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.thread-item-info {
  font-size: 11px;
  color: var(--muted-foreground);
}

.no-threads {
  padding: 24px 16px;
  text-align: center;
  color: rgba(255,255,255,0.5);
  font-size: 12px;
}

/* Chat Blank State */
.chat-blank-state {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px 24px;
  text-align: center;
}

.chat-blank-state .mascot-image {
  width: 120px;
  height: 120px;
  margin-bottom: 24px;
  filter: drop-shadow(0 0 20px color-mix(in oklch, var(--ring) 40%, transparent));
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

.chat-blank-state .title {
  font-size: 18px;
  font-weight: 600;
  color: var(--foreground);
  margin-bottom: 8px;
}

.chat-blank-state .subtitle {
  font-size: 14px;
  color: var(--muted-foreground);
  line-height: 1.5;
  margin-bottom: 24px;
}

.chat-blank-state .suggestions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
}

.suggestion-chip {
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  background-color: color-mix(in oklch, var(--card) 92%, transparent);
  border: 1px solid var(--border);
  color: var(--muted-foreground);
  cursor: pointer;
  transition: all 0.2s ease;
}

.suggestion-chip:hover {
  background-color: color-mix(in oklch, var(--ring) 10%, transparent);
  border-color: color-mix(in oklch, var(--ring) 30%, transparent);
  transform: translateY(-1px);
}

/* Preview Panel */
.preview-panel {
  flex: 1;
  background-color: rgba(255,255,255,0.02);
  overflow-y: auto;
  padding: 20px;
  color: rgba(255,255,255,0.6);
  font-size: 14px;
}

.preview-panel:not(.has-content) {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Documentation View - New Structure */
.documentation-view {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.documentation-layout {
  display: flex;
  height: 100%;
}

.documentation-nav {
  width: 280px;
  background-color: rgba(0,0,0,0.3);
  backdrop-filter: blur(10px);
  border-right: 1px solid rgba(255,255,255,0.1);
  overflow-y: auto;
}

.documentation-nav.loading {
  display: flex;
  align-items: center;
  justify-content: center;
}

.nav-header {
  padding: 16px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}

.nav-header h3 {
  font-size: 14px;
  font-weight: 500;
  color: var(--muted-foreground);
}

.nav-sections {
  padding: 8px 0;
}

.nav-section {
  margin-bottom: 4px;
}

.nav-section-item {
  padding: 8px 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  border-radius: 4px;
  margin: 2px 0;
}

.nav-section-item:hover {
  background-color: rgba(255,255,255,0.05);
}

.nav-section-item.active {
  background-color: var(--neon-base-lighter);
  color: var(--foreground);
}

.section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
  color: var(--muted-foreground);
  transition: all 0.2s ease;
}

.section-header:hover {
  background-color: rgba(255,255,255,0.05);
  color: var(--muted-foreground);
}

.section-content {
  padding-left: 16px;
}

.entity-list {
  display: flex;
  flex-direction: column;
}

.entity-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 16px;
  cursor: pointer;
  font-size: 12px;
  color: var(--muted-foreground);
  transition: all 0.2s ease;
}

.entity-item:hover {
  background-color: rgba(255,255,255,0.05);
  color: var(--muted-foreground);
}

.entity-item.active {
  background-color: rgba(138,43,226,0.2);
  color: var(--neon-glow);
}

.entity-item.add-new {
  color: var(--muted-foreground);
  font-style: italic;
}

.entity-item.add-new:hover {
  color: var(--neon-base);
}

.entity-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.documentation-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.documentation-editor {
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.documentation-editor.empty {
  display: flex;
  align-items: center;
  justify-content: center;
}

.documentation-editor.loading {
  display: flex;
  align-items: center;
  justify-content: center;
}

.empty-state {
  text-align: center;
  color: var(--muted-foreground);
}

.editor-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  background-color: rgba(0,0,0,0.2);
}

.editor-header h3 {
  font-size: 16px;
  font-weight: 500;
  color: var(--muted-foreground);
}

.editor-actions {
  display: flex;
  gap: 8px;
}

.save-btn, .delete-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border: none;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.save-btn {
  background-color: var(--neon-base);
  color: white;
}

.save-btn:hover:not(:disabled) {
  background-color: color-mix(in oklch, var(--ring) 60%, transparent);
}

.save-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.delete-btn {
  background-color: var(--neon-err);
  color: white;
}

.delete-btn:hover:not(:disabled) {
  background-color: color-mix(in oklch, var(--destructive) 60%, transparent);
}

.delete-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.error-message {
  color: var(--destructive-foreground);
  font-size: 12px; /* Smaller font size */
  margin-top: 4px;
  font-weight: 400;
  padding: 0;
  background: none;
  border: none;
}

.api-error-message {
  background-color: color-mix(in oklch, var(--destructive) 10%, transparent);
  border-left: 3px solid var(--destructive);
  padding: 12px 16px;
  margin-bottom: 16px;
  color: var(--destructive);
  font-size: 13px;
  border-radius: 4px;
}

.editor-form {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
}

.form-group {
  margin-bottom: 1rem;
  display: flex;
  flex-direction: column;
}

.form-group label {
  font-weight: 500;
  margin-bottom: 0.5rem;
  font-size: 0.875rem;
  color: var(--muted-foreground); /* gray-400 */
}

.form-group input,
.form-group textarea,
.form-group select {
  width: 100%;
  padding: 8px 12px;
  background-color: color-mix(in oklch, var(--background) 5%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 4px;
  color: var(--muted-foreground);
  font-size: 13px;
  font-family: inherit;
  transition: border-color 0.2s;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
  outline: none;
  border-color: var(--neon-base);
  box-shadow: 0 0 0 2px rgba(138, 43, 226, 0.2);
}

.form-group textarea {
  min-height: 80px;
  resize: vertical;
}

.form-group select[multiple] {
  min-height: 100px;
}

.form-group .input-error {
  border-color: var(--destructive);
}

.form-group .error-message {
  color: var(--destructive-foreground);
  font-size: 12px; /* Smaller font size */
  margin-top: 4px;
  font-weight: 400;
  opacity: 0.9;
}

.array-item {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}

.array-item input {
  flex: 1;
}

.remove-btn {
  padding: 8px;
  background-color: rgba(255,92,138,0.2);
  border: 1px solid var(--neon-err);
  border-radius: 4px;
  color: var(--neon-err);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.remove-btn:hover {
  background-color: rgba(255,92,138,0.3);
}

.add-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background-color: rgba(138,43,226,0.2);
  border: 1px solid var(--neon-base);
  border-radius: 4px;
  color: var(--neon-base);
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s ease;
}

.add-btn:hover {
  background-color: rgba(138,43,226,0.3);
}

.loading-container {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
}

.loading-text {
  color: var(--muted-foreground);
  font-size: 14px;
}

/* Legacy Documentation Content Styles */
.documentation-content {
  max-width: 800px;
  margin: 0 auto;
  color: var(--muted-foreground);
  line-height: 1.6;
}

.documentation-content h1,
.documentation-content h2,
.documentation-content h3 {
  color: var(--foreground);
  margin-top: 24px;
  margin-bottom: 12px;
}

.documentation-content h1 {
  font-size: 24px;
  border-bottom: 1px solid var(--border);
  padding-bottom: 8px;
}

.documentation-content h2 {
  font-size: 20px;
}

.documentation-content h3 {
  font-size: 16px;
}

.documentation-content p {
  margin-bottom: 12px;
}

.documentation-content code {
  background-color: color-mix(in oklch, var(--background) 35%, transparent);
  padding: 2px 4px;
  border-radius: 3px;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 12px;
}

.documentation-content pre {
  background-color: color-mix(in oklch, var(--background) 35%, transparent);
  padding: 12px;
  border-radius: 4px;
  overflow-x: auto;
  margin: 12px 0;
}

.documentation-content pre code {
  background: none;
  padding: 0;
}

/* Documentation Explorer Styles */
.documentation-explorer {
  height: 100%;
  color: var(--muted-foreground);
  display: flex;
  min-height: 0;
}

.documentation-explorer-simple {
  height: 100%;
  color: var(--muted-foreground);
  min-height: 0;
}

.documentation-explorer.loading,
.documentation-explorer.error,
.documentation-explorer-simple.loading,
.documentation-explorer-simple.error {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 400px;
}

.explorer-header {
  margin-bottom: 32px;
}

.explorer-header h1 {
  font-size: 32px;
  color: var(--foreground);
  margin: 0;
}

.explorer-content {
  display: flex;
  flex-direction: column;
  gap: 32px;
}

.explorer-section {
  background: color-mix(in oklch, var(--background) 5%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 12px;
  padding: 24px;
}

.section-header {
  display: flex;
  align-items: flex-start;
  gap: 16px;
}

.section-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  background: rgba(138, 43, 226, 0.2);
  border: 1px solid rgba(138, 43, 226, 0.4);
  border-radius: 12px;
  color: var(--neon-glow);
}

.section-info h2 {
  font-size: 24px;
  color: var(--foreground);
  margin: 0 0 8px 0;
}

.section-info p {
  color: var(--muted-foreground);
  margin: 0;
  font-size: 14px;
}

/* App Overview */
.app-overview .section-icon {
  background: color-mix(in oklch, var(--secondary) 20%, transparent);
  border-color: color-mix(in oklch, var(--secondary) 40%, transparent);
  color: var(--secondary);
}

.app-description {
  margin-bottom: 24px;
  font-size: 16px;
  line-height: 1.6;
}

.pain-points h3 {
  font-size: 18px;
  color: var(--foreground) ;
  margin-bottom: 16px;
}

.pain-point {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 12px;
  padding: 16px;
  background: rgba(255, 92, 138, 0.1);
  border-left: 3px solid var(--accent);
  border-radius: 8px;
}

.pain-point-indicator {
  width: 4px;
  height: 4px;
  background: var(--accent);
  border-radius: 50%;
  margin-top: 8px;
  flex-shrink: 0;
}

.pain-point p {
  margin: 0;
  color: var(--muted-foreground);
}

/* Personas */
.personas-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
}

.persona-card {
  background: color-mix(in oklch, var(--background) 3%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 12px;
  padding: 20px;
}

.persona-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.persona-avatar {
  width: 40px;
  height: 40px;
  background: rgba(138, 43, 226, 0.2);
  border: 1px solid rgba(138, 43, 226, 0.4);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--neon-glow);
}

.persona-info h3 {
  font-size: 18px;
  color: var(--foreground) ;
  margin: 0;
}

.persona-type {
  font-size: 12px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.persona-description {
  color: var(--muted-foreground);
  margin-bottom: 20px;
  line-height: 1.5;
}

.persona-activities h4 {
  font-size: 12px;
  color: var(--muted-foreground);
  margin-bottom: 12px;
  letter-spacing: 0.5px;
}

.activity-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.activity-tag {
  background: rgba(59, 130, 246, 0.2);
  color: var(--accent);
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
}

/* Flow Sections */
.flow-section {
  margin-bottom: 24px;
}

.flow-section-header {
  cursor: pointer;
  padding: 16px;
  background: color-mix(in oklch, var(--background) 3%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 8px;
  margin-bottom: 12px;
}

.flow-section-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.flow-section-title h3 {
  font-size: 18px;
  color: var(--foreground) ;
  margin: 0;
}

.task-count {
  color: var(--muted-foreground);
  font-size: 14px;
}

.flow-tasks {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.flow-task {
  background: color-mix(in oklch, var(--background) 3%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 8px;
  padding: 16px;
}

.task-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.task-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: rgba(138, 43, 226, 0.2);
  border: 1px solid rgba(138, 43, 226, 0.4);
  border-radius: 8px;
  color: var(--neon-glow);
  flex-shrink: 0;
}

.task-content {
  flex: 1;
}

.task-content h4 {
  font-size: 16px;
  color: var(--background) ;
  margin: 0 0 8px 0;
}

.task-content p {
  color: var(--muted-foreground);
  margin: 0;
  font-size: 14px;
}

.task-status {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.status-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.status-indicator.pending {
  background: color-mix(in oklch, var(--secondary) 50%, transparent);
}

.status-text {
  color: var(--muted-foreground);
  font-size: 12px;
}

.status-icon {
  color: var(--muted-foreground);
}

/* Stories Grid */
.stories-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 16px;
}

.story-card {
  background: color-mix(in oklch, var(--background) 3%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 8px;
  padding: 16px;
}

.story-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.story-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  color: var(--neon-glow);
}

.story-header h3 {
  font-size: 16px;
  color: var(--foreground) ;
  margin: 0;
}

.story-description {
  color: var(--muted-foreground);
  margin-bottom: 12px;
  font-size: 14px;
  line-height: 1.4;
}

.story-meta {
  font-size: 12px;
  color: var(--muted-foreground);
}

/* Team History */
.team-history-content {
  margin-top: 16px;
}

.history-section-header {
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: color-mix(in oklch, var(--background) 3%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 8px;
}

.history-section-header h3 {
  font-size: 16px;
  color: var(--foreground) ;
  margin: 0;
}

/* Explorer Navigation - Removed (no longer needed) */

/* Explorer Main Content */
.explorer-main {
  flex: 1;
  padding: 24px;
  overflow-y: auto;
  min-height: 0;
}

.documentation-explorer-simple .explorer-main {
  width: 100%;
  padding: 24px;
  overflow-y: auto;
  min-height: 0;
  height: 100%;
}

/* Explorer Content */
.explorer-content {
  max-width: 1200px;
  margin: 0 auto;
}

/* Overview Content */
.overview-content {
  max-width: 1200px;
}

/* Expandable Sections */
.expandable-sections {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.expandable-section {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}

.expandable-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.expandable-header:hover {
  background: color-mix(in oklch, var(--background) 5%, transparent);
}

.expandable-title {
  display: flex;
  align-items: center;
  gap: 16px;
}

.expandable-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: rgba(138, 43, 226, 0.2);
  border: 1px solid rgba(138, 43, 226, 0.4);
  border-radius: 10px;
  color: var(--neon-glow);
}

.expandable-title h3 {
  font-size: 18px;
  color: var(--foreground) ;
  margin: 0;
}

.count {
  margin: 0 -8px;
}

.expand-indicator {
  color: var(--muted-foreground);
  transition: transform 0.2s ease;
}

.expandable-content {
  padding: 0 24px 24px 24px;
  border-top: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  background: color-mix(in oklch, var(--background) 5%, transparent);
}

.entity-buttons {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 12px;
  margin-top: 16px;
}

.entity-button {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px 16px;
  color: var(--muted-foreground);
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
  font-size: 14px;
}

.entity-button:hover {
  background: var(--border);
  border-color: var(--ring);
  color: var(--neon-glow);
  transform: translateY(-1px);
}

.empty-section {
  color: var(--muted-foreground);
  font-style: italic;
  padding: 16px 0;
  text-align: center;
}

/* Activities by Flow */
.activities-by-flow {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-top: 16px;
}

.flow-group {
  background: color-mix(in oklch, var(--background) 5%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 8px;
  padding: 16px;
}

.flow-group-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
}

.flow-group-title {
  display: flex;
  align-items: center;
  gap: 8px;
}

.flow-group-title svg {
  color: var(--neon-glow);
}

.flow-group-title h4 {
  font-size: 16px;
  color: var(--background) ;
  margin: 0;
}

.flow-count {
  font-size: 12px;
  color: var(--muted-foreground);
  background: color-mix(in oklch, var(--background) 10%, transparent);
  padding: 2px 6px;
  border-radius: 3px;
}

.flow-link-button {
  background: rgba(138, 43, 226, 0.2);
  border: 1px solid rgba(138, 43, 226, 0.4);
  color: var(--neon-glow);
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s ease;
}

.flow-link-button:hover {
  background: rgba(138, 43, 226, 0.3);
  border-color: rgba(138, 43, 226, 0.6);
}

.flow-activities {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 8px;
}

.activity-button {
  padding: 10px 12px !important;
}

.activity-button-content {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
}

.activity-title {
  font-size: 14px;
  font-weight: 500;
  color: inherit;
}

.activity-type {
  font-size: 11px;
  color: var(--muted-foreground);
  background: color-mix(in oklch, var(--background) 10%, transparent);
  padding: 2px 6px;
  border-radius: 3px;
  text-transform: capitalize;
}

/* Tests Grid Compact */
.tests-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 12px;
  margin-top: 16px;
}

.test-card-compact {
  background: color-mix(in oklch, var(--background) 5%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 8px;
  padding: 16px;
  transition: all 0.2s ease;
}

.test-card-compact:hover {
  background: color-mix(in oklch, var(--background) 10%, transparent);
  border-color: rgba(138, 43, 226, 0.4);
  transform: translateY(-1px);
}

.test-header-compact {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.test-icon-compact {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: rgba(138, 43, 226, 0.2);
  border: 1px solid rgba(138, 43, 226, 0.4);
  border-radius: 6px;
  color: var(--neon-glow);
}

.test-header-compact h4 {
  font-size: 14px;
  color: var(--background) ;
  margin: 0;
}

.test-meta-compact {
  margin-bottom: 12px;
}

.test-meta-compact > div {
  font-size: 11px;
  color: var(--muted-foreground);
  margin-bottom: 3px;
}

.test-steps-compact {
  color: var(--muted-foreground);
  font-size: 12px;
}

/* Personas Content */
.personas-content {
  max-width: 1000px;
}

.clickable {
  cursor: pointer;
  transition: all 0.2s ease;
}

.clickable:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Empty State */
.empty-state {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 200px;
  color: var(--muted-foreground);
  font-size: 16px;
  background: color-mix(in oklch, var(--background) 3%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 12px;
}

/* Features Preview */
.features-preview {
  margin-top: 24px;
}

.features-preview h3 {
  font-size: 18px;
  color: var(--foreground) ;
  margin-bottom: 16px;
}

.feature-item {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
  padding: 12px;
  background: rgba(16, 185, 129, 0.1);
  border-left: 3px solid var(--accent);
  border-radius: 8px;
}

.feature-item svg {
  color: var(--accent);
  flex-shrink: 0;
}

.feature-item p {
  margin: 0;
  color: var(--muted-foreground);
}

/* Mapa Content */
.mapa-content {
  max-width: 1200px;
}

.mapa-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 20px;
}

.activity-map-card {
  background: color-mix(in oklch, var(--background) 3%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 12px;
  padding: 20px;
}

.activity-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
  padding: 12px;
  background: color-mix(in oklch, var(--background) 3%, transparent);
  border-radius: 8px;
}

.activity-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: rgba(138, 43, 226, 0.2);
  border: 1px solid rgba(138, 43, 226, 0.4);
  border-radius: 8px;
  color: var(--neon-glow);
}

.activity-header h3 {
  flex: 1;
  font-size: 16px;
  color: var(--foreground) ;
  margin: 0;
}

.activity-type {
  font-size: 12px;
  color: var(--muted-foreground);
  background: color-mix(in oklch, var(--background) 10%, transparent);
  padding: 4px 8px;
  border-radius: 4px;
}

.stories-list h4 {
  font-size: 14px;
  color: var(--muted-foreground);
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.story-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  margin-bottom: 8px;
  background: color-mix(in oklch, var(--background) 3%, transparent);
  border-radius: 6px;
  color: var(--muted-foreground);
  font-size: 14px;
}

.story-item svg {
  color: var(--neon-glow);
  flex-shrink: 0;
}

.empty-stories {
  color: var(--muted-foreground);
  font-style: italic;
  padding: 8px 12px;
  text-align: center;
}

/* Testes Content */
.testes-content {
  max-width: 1200px;
}

.testes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
}

.test-card {
  background: color-mix(in oklch, var(--background) 3%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 12px;
  padding: 20px;
}

.test-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.test-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: rgba(138, 43, 226, 0.2);
  border: 1px solid rgba(138, 43, 226, 0.4);
  border-radius: 8px;
  color: var(--neon-glow);
}

.test-header h3 {
  font-size: 16px;
  color: var(--foreground) ;
  margin: 0;
}

.test-meta {
  margin-bottom: 16px;
}

.test-meta > div {
  font-size: 12px;
  color: var(--muted-foreground);
  margin-bottom: 4px;
}

.test-steps {
  color: var(--muted-foreground);
  font-size: 14px;
}

/* Entity Detail */
.entity-detail {
  max-width: 800px;
}

.entity-detail-header {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 32px;
  padding-bottom: 16px;
  border-bottom: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
}

.back-button {
  background: color-mix(in oklch, var(--background) 10%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 20%, transparent);
  color: var(--muted-foreground);
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s ease;
}

.back-button:hover {
  background: color-mix(in oklch, var(--background) 20%, transparent);
  color: var(--background) ;
}

.entity-detail-header h3 {
  flex: 1;
  font-size: 24px;
  color: var(--foreground) ;
  margin: 0;
}

.entity-type {
  font-size: 12px;
  color: var(--muted-foreground);
  background: color-mix(in oklch, var(--background) 10%, transparent);
  padding: 4px 8px;
  border-radius: 4px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.entity-detail-content {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.entity-section h4 {
  font-size: 16px;
  color: var(--foreground) ;
  margin-bottom: 12px;
}

.entity-section p {
  color: var(--muted-foreground);
  line-height: 1.6;
  margin: 0;
}

.entity-section ol {
  color: var(--muted-foreground);
  padding-left: 20px;
}

.entity-section ol li {
  margin-bottom: 8px;
  line-height: 1.5;
}

.entity-links {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.entity-link {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: color-mix(in oklch, var(--background) 3%, transparent);
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
  border-radius: 8px;
  color: var(--muted-foreground);
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
  font-size: 14px;
}

.entity-link:hover {
  background: color-mix(in oklch, var(--background) 10%, transparent);
  border-color: rgba(138, 43, 226, 0.4);
  color: var(--neon-glow);
}

.entity-link svg {
  color: var(--muted-foreground);
  transition: color 0.2s ease;
}

.entity-link:hover svg {
  color: var(--neon-glow);
}

/* Explorer mode layout adjustments */
.documentation-layout.explorer-mode {
  display: block;
  height: 100%;
}

.documentation-layout.explorer-mode .documentation-main {
  width: 100%;
  max-width: none;
  height: 100%;
  overflow: visible;
}

/* Fix scroll for documentation section */
.main-content .editor-area {
  overflow: hidden;
}

.main-content .editor-area .documentation-view {
  height: 100%;
  overflow: hidden;
}

/* Flow States Flowchart */
.flow-states-flowchart {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  background: color-mix(in oklch, var(--background) 5%, transparent);
  border-radius: 8px;
  border: 1px solid color-mix(in oklch, var(--background) 10%, transparent);
}

.flow-state-card {
  display: flex;
  flex-direction: column;
  padding: 16px;
  background: color-mix(in oklch, var(--background) 5%, transparent);
  border: 1px solid color-mix(in oklch, var(--border) 50%, transparent);
  border-radius: 8px;
  position: relative;
  transition: all 0.2s ease;
}

.flow-state-card:hover {
  background: color-mix(in oklch, var(--background) 10%, transparent);
  border-color: rgba(138, 43, 226, 0.4);
}

.flow-state-card.initial {
  border-color: rgba(34, 197, 94, 0.6);
  background: rgba(34, 197, 94, 0.1);
}

.flow-state-card.final {
  border-color: rgba(239, 68, 68, 0.6);
  background: rgba(239, 68, 68, 0.1);
}

.flow-state-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.flow-state-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--foreground) ;
  margin: 0;
}

.flow-state-badges {
  display: flex;
  gap: 6px;
}

.flow-state-badge {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 4px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: 500;
}

.flow-state-badge.initial {
  background: rgba(34, 197, 94, 0.2);
  color: #22c55e;
  border: 1px solid rgba(34, 197, 94, 0.4);
}

.flow-state-badge.final {
  background: rgba(239, 68, 68, 0.2);
  color: #ef4444;
  border: 1px solid rgba(239, 68, 68, 0.4);
}

.flow-state-description {
  color: var(--muted-foreground);
  font-size: 14px;
  margin-bottom: 12px;
  line-height: 1.4;
}

.flow-state-roles {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-bottom: 8px;
}

.role-label {
  font-size: 11px;
  padding: 3px 8px;
  background: rgba(138, 43, 226, 0.2);
  color: var(--neon-glow);
  border: 1px solid rgba(138, 43, 226, 0.4);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.role-label:hover {
  background: rgba(138, 43, 226, 0.3);
  border-color: rgba(138, 43, 226, 0.6);
}

.flow-state-arrow {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 8px 0;
  color: var(--muted-foreground);
}

.flow-state-arrow svg {
  transform: rotate(90deg);
}

.flow-transitions {
  margin-top: 8px;
}

.flow-transitions-label {
  font-size: 12px;
  color: var(--muted-foreground);
  margin-bottom: 4px;
}

.transition-labels {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.transition-label {
  font-size: 10px;
  padding: 2px 6px;
  background: rgba(59, 130, 246, 0.2);
  color: var(--accent);
  border: 1px solid rgba(59, 130, 246, 0.4);
  border-radius: 8px;
}

::view-transition-old(root), ::view-transition-new(root) {
    animation: none;
    mix-blend-mode: normal;
}